<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أمثلة عربية</title>
    <link rel="stylesheet" id="main_stylesheet" href="static/styles/setup_2/main_style.css">

    <link rel="stylesheet" id="stylesheet" href="{% if mode == 'light' %}static/styles/setup_2/light_style.css{% else %}static/styles/setup_2/dark_style.css{% endif %}">

</head>
<body>

<header>
    <a href="/"><img src="static/images/logo.png" alt="logo"></a>
</header>

<div class="container">
    <form action="/change_the_setup" method="post">
        <button type="submit" name="destination" value="3" style="
                        background: #222140;
                        color: #ffffff;
                        padding: 4px;
                        font-size: 16px;
                        display: inline-block;
                        width: 180px;
                        margin-bottom: 5px;
                        cursor: pointer;
                        direction: rtl;
                        margin-left: 24px;
                        ">شارك في تطوير معجم الرياض!</button>
        <button type="submit" name="destination" value="2" style="
                        background: #222140;
                        color: #02fd00;
                        padding: 4px;
                        font-size: 16px;
                        display: inline-block;
                        margin-left: 266px;
                        width: 160px;
                        margin-bottom: 5px;
                        cursor: pointer;
                        ">استخدم معاني معجم الرياض</button>
        <button type="submit" name="destination" value="1" style="
                        background: #222140;
                        color: #ffffff;
                        padding: 4px;
                        font-size: 16px;
                        display: inline-block;
                        width: 160px;
                        margin-bottom: 5px;
                        cursor: pointer;
                        ">ادخل المعاني بنفسك</button>

    </form>
    <form id="examples_search_form" action="/get_examples_setup_2" method="POST">
        <label title="اكتب الكلمة مثل: 'يأكل'" for="word_input" class="word_label" >الكلمة:</label>
        <input placeholder="مثال: يأكل" title="اكتب الكلمة مثل: 'يأكل'" type="text" id="word_input" class="word_input" name="word" value="{{word}}" {% if list_of_meanings_dicts %}readonly{% endif %} style="{% if list_of_meanings_dicts %}color: gray;{% endif %}">

        <img src="static/images/drop_down.png" style="width: 21px;position: absolute;margin: 22px  0 0 34px;">        <label title="اختر معنى الكلمة" for="type-select" class="meaning_label">المعنى:</label>
        <select title="اختر معنى الكلمة" class="dropdown-select" name="meaning" id="type-select" {% if not list_of_meanings_dicts %}style="color: gray;"{% endif %} {% if not list_of_meanings_dicts %}disabled{% endif %}>
            {% if not list_of_meanings_dicts %}
            <option >لعرض المعاني: قم بكتابة الكلمة ثم اضغط على "البحث"</option>
            {% endif %}
            {% if list_of_meanings_dicts %}
            {% for item in list_of_meanings_dicts %}
            <option value="{{ item['meaning'] }}" title="{{ item['word_with_diacr'] + ': ' + item['meaning'] }}">
                {{ item['word_with_diacr'] + ": " + ' '.join(item['meaning'].split()[:5]) + ('...' if item['meaning'].split()|length > 5 else '') }}
            </option>
            {% endfor %}
            {% endif %}
        </select>


        <label title="اختر مصدر الأمثلة" class="resource_type_lable" >مصدر الأمثلة:</label>
        <div class="type_button_container">
            <div id="news"  title="الأخبار" class="type_button" onclick="toggleTypeButton(event, 'news')"><img title="الأخبار" class="resource_type_icon" src="static/images/News_icon.png" alt="News"></div>
            <div id="poetry"  title="الشّعر العربي" class="type_button" onclick="toggleTypeButton(event, 'poetry')"><img title="الشّعر العربي" class="resource_type_icon" src="static/images/Poetry_icon.png" alt="Poetry"></div>
            <div id="hadith"  title="كتب السُّنة النبوية" class="type_button" onclick="toggleTypeButton(event, 'hadith')"><img title="كتب السُّنة النبوية" class="resource_type_icon" src="static/images/Sunnah_icon.png" alt=hadith"></div>
            <div id="quraan"  title="القرآن الكريم" class="type_button" onclick="toggleTypeButton(event, 'quraan')"><img title="القرآن الكريم" class="resource_type_icon" src="static/images/Quran_icon.png" alt="Quran"></div>
            <div id="all"  title="جميع المصادر" class="type_button" onclick="toggleTypeButton(event, 'all')"><img title="جميع المصادر" class="resource_type_icon" src="static/images/All_icon.png" alt="All"></div>

            <input type="hidden" id="type_hiddenInput" name="resource_type" value="{{resource_type}}">
        </div>


        <input type="submit" value="البحث" class="search-button">
        <div id="overlay">
            <div id="loader"></div>
            <span style="direction: rtl">جاري البحث...</span>
        </div>
    </form>
    <ul>
        {% for highlighted_word_with_examples in examples%}
        <span class="examples_word">{{highlighted_word_with_examples[0]}}</span>

        {% for example in highlighted_word_with_examples[1] %}
        <li>
            {{example|safe}}
        </li>
        {% endfor %}


        {% endfor %}
    </ul>
    <form id="set_mode_form" action="/set_mode" method="POST">
        <input type="hidden" id="mode_hiddenInput" name="mode" value="{{mode}}">

        <div id="toggle-circle" onclick="toggleMode()" style="background-color: {{ 'rgb(50, 50, 50)' if mode == 'light' else '#3498db' }}" >
            <span id="mode-icon">{{ "☀️" if mode == 'dark' else '🌙' }}</span>
        </div>
    </form>
</div>



<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Get the value of the hidden input
        var hiddenInputValue = document.getElementById("type_hiddenInput").value;

        // Add 'active' class to the button with the corresponding ID
        var correspondingButton = document.getElementById(hiddenInputValue);
        if (correspondingButton) {
            correspondingButton.classList.add("active");
        }
    });
    function toggleTypeButton(event, buttonId) {
        event.preventDefault();
        // Get all buttons
        var buttons = document.querySelectorAll('.type_button');

        // Loop through each button
        buttons.forEach(function(button) {
            // Remove 'active' class from all buttons
            button.classList.remove('active');
        });

        // Add 'active' class to the clicked button
        document.getElementById(buttonId).classList.add('active');
        document.getElementById("type_hiddenInput").value = buttonId
    }
    function toggleMode() {
        // Get the <link> element
        var styleSheet = document.getElementById("stylesheet");

        const body = document.body;
        const hiddenInput = document.getElementById("mode_hiddenInput");
        modeToggle= document.getElementById("toggle-circle");
        if (hiddenInput.value === 'light') {
            // Switch to dark mode
            body.classList.add("dark-mode");
            modeToggle.textContent = "☀️"; // Sun icon
            modeToggle.style.backgroundColor = "#3498db"; // Light mode button color
            hiddenInput.value = 'dark';
            // Change the href attribute to the new stylesheet
            styleSheet.href = "static/styles/setup_2/dark_style.css";
        } else {
            // Switch to light mode
            body.classList.remove("dark-mode");
            modeToggle.textContent = "🌙"; // Moon icon
            modeToggle.style.backgroundColor = "rgb(50,50,50)"; // Dark mode button color
            hiddenInput.value = 'light';
            // Change the href attribute to the new stylesheet
            styleSheet.href = "static/styles/setup_2/light_style.css";
        }
        document.getElementById('set_mode_form').submit();
    }
    function updateSliderValue() {
        var slider = document.getElementById("num_of_examples");
        var output = document.getElementById("sliderValue");
        output.innerHTML = "عدد الأمثلة: " + slider.value;
    }
    document.getElementById('examples_search_form').addEventListener('submit', function(event) {
        var wordInput = document.getElementById('word_input').value.trim();

        if (wordInput === "") {
            event.preventDefault();
            document.getElementById('word_input').style.borderColor = 'red';

            // Change the border color back to default after 2 seconds
            setTimeout(function () {

                document.getElementById('word_input').style.borderColor = '#222140';
                alert("فضلاً, قم بإدخال الكلمة في الخانة المخصصة لذلك.");
            }, 150);
            return
        }
        document.getElementById("overlay").style.display = "flex";
        document.getElementById("loader").style.display = "flex";
    });
</script>

</body>
</html>
